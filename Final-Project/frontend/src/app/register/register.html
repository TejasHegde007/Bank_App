<div class="register-wrapper">
  <div class="register-card">
    <img src="https://img.icons8.com/ios-filled/100/ffffff/bank-building.png" alt="Logo" class="logo" />
    <h1 class="title">Create Account</h1>
    <p class="tagline">Join us and start your journey</p>

    <form (ngSubmit)="onSubmit()" #registerForm="ngForm" novalidate>
      <!-- First Name -->
      <div class="input-group">
        <label for="firstName" class="visually-hidden">First Name</label>
        <div class="input-icon">
          <input
            id="firstName"
            type="text"
            placeholder="First Name"
            name="firstName"
            [(ngModel)]="firstName"
            #firstNameRef="ngModel"
            required
            autocomplete="given-name"
            [disabled]="loading"
          />
          <span class="icon user-icon"></span>
        </div>
        <div
          *ngIf="firstNameRef.invalid && (firstNameRef.dirty || firstNameRef.touched)"
          class="error-message"
        >
          <div *ngIf="firstNameRef.errors?.['required']">First name is required.</div>
        </div>
      </div>

      <!-- Last Name -->
      <div class="input-group">
        <label for="lastName" class="visually-hidden">Last Name</label>
        <div class="input-icon">
          <input
            id="lastName"
            type="text"
            placeholder="Last Name"
            name="lastName"
            [(ngModel)]="lastName"
            #lastNameRef="ngModel"
            required
            autocomplete="family-name"
            [disabled]="loading"
          />
          <span class="icon user-icon"></span>
        </div>
        <div
          *ngIf="lastNameRef.invalid && (lastNameRef.dirty || lastNameRef.touched)"
          class="error-message"
        >
          <div *ngIf="lastNameRef.errors?.['required']">Last name is required.</div>
        </div>
      </div>

      <!-- Email -->
      <div class="input-group">
        <label for="email" class="visually-hidden">Email</label>
        <div class="input-icon">
          <input
            id="email"
            type="email"
            placeholder="Email"
            name="email"
            [(ngModel)]="email"
            #emailRef="ngModel"
            required
            email
            autocomplete="email"
            [disabled]="loading"
          />
          <span class="icon email-icon"></span>
        </div>
        <div
          *ngIf="emailRef.invalid && (emailRef.dirty || emailRef.touched)"
          class="error-message"
        >
          <div *ngIf="emailRef.errors?.['required']">Email is required.</div>
          <div *ngIf="emailRef.errors?.['email']">Please enter a valid email address.</div>
        </div>
      </div>

      <!-- Phone Number -->
      <div class="input-group">
        <label for="phoneNumber" class="visually-hidden">Phone Number</label>
        <div class="input-icon">
          <input
            id="phoneNumber"
            type="tel"
            placeholder="Phone Number"
            name="phoneNumber"
            [(ngModel)]="phoneNumber"
            #phoneNumberRef="ngModel"
            required
            pattern="^[0-9]{10}$"
            autocomplete="tel"
            [disabled]="loading"
          />
          <span class="icon phone-icon"></span>
        </div>
        <div
          *ngIf="phoneNumberRef.invalid && (phoneNumberRef.dirty || phoneNumberRef.touched)"
          class="error-message"
        >
          <div *ngIf="phoneNumberRef.errors?.['required']">Phone Number is required.</div>
          <div *ngIf="phoneNumberRef.errors?.['pattern']">Enter a valid 10-digit phone number.</div>
        </div>
      </div>

      <!-- Password -->
      <div class="input-group">
        <label for="password" class="visually-hidden">Password</label>
        <div class="input-icon">
          <input
            id="password"
            type="password"
            placeholder="Password"
            name="password"
            [(ngModel)]="password"
            #passwordRef="ngModel"
            required
            minlength="8"
            autocomplete="new-password"
            (input)="checkPasswords()"
            [disabled]="loading"
          />
          <span class="icon lock-icon"></span>
        </div>
        <div
          *ngIf="passwordRef.invalid && (passwordRef.dirty || passwordRef.touched)"
          class="error-message"
        >
          <div *ngIf="passwordRef.errors?.['required']">Password is required.</div>
          <div *ngIf="passwordRef.errors?.['minlength']">
            Password must be at least 8 characters.
          </div>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="input-group">
        <label for="confirmPassword" class="visually-hidden">Confirm Password</label>
        <div class="input-icon">
          <input
            id="confirmPassword"
            type="password"
            placeholder="Confirm Password"
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            #confirmPasswordRef="ngModel"
            required
            autocomplete="new-password"
            (input)="checkPasswords()"
            [disabled]="loading"
          />
          <span class="icon lock-icon"></span>
        </div>
        <div
          *ngIf="passwordMismatch && (confirmPasswordRef.dirty || confirmPasswordRef.touched)"
          class="error-message"
        >
          Passwords do not match!
        </div>
      </div>

      <button
        type="submit"
        class="register-btn"
        [disabled]="registerForm.invalid || passwordMismatch || loading"
      >
        {{ loading ? 'Registering...' : 'Register' }}
      </button>
    </form>

    <p class="register-link">
      Already have an account? <a routerLink="/">Login here</a>
    </p>

    <div *ngIf="error && !passwordMismatch" class="error-message">{{ error }}</div>
  </div>
</div>